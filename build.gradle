/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.4/userguide/java_library_plugin.html
 */

task wrapper(type: Wrapper) {
   gradleVersion = '3.2.1'
}

buildscript {
	repositories {
		mavenCentral()
	    maven {
	      url "https://plugins.gradle.org/m2/"
	    }
	}
	dependencies {
		classpath 'gradle.plugin.com.boxfuse.client:flyway-release:4.1.2'
		classpath 'mysql:mysql-connector-java:5.1.39'
	}
}

apply plugin: 'java'
apply plugin: 'eclipse-wtp'
apply plugin: 'war'
apply plugin: 'org.flywaydb.flyway'

configurations{
	provided
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

sourceSets {
    main {
        compileClasspath += configurations.provided 
    }
}

repositories {
	mavenCentral()
}

eclipse {  
  classpath {
    plusConfigurations = [ configurations.compile, configurations.provided ]
  }
}

war {
    baseName = 'RestApp'
    version = 'v1-' + System.currentTimeMillis();
}

dependencies {
	provided 'javax:javaee-api:7.0'
	
	provided 'javax.validation:validation-api:1.1.0.Final'
	
	provided 'org.jboss.resteasy:resteasy-jaxrs:3.0.19.Final'
	
	provided 'org.jboss.resteasy:resteasy-jackson-provider:3.0.19.Final'
	
	provided 'org.jboss.resteasy:resteasy-multipart-provider:3.0.19.Final'
		
	compile 'org.apache.commons:commons-lang3:3.5'
	
	// Jackson-Core
	provided 'com.fasterxml.jackson.core:jackson-core:2.7.4'

	//JUnit
	testCompile 'junit:junit:4.12'
	
	//MySQL
	compile 'mysql:mysql-connector-java:5.1.39'

}

flyway {
	url = 'jdbc:mysql://localhost:3306/apprest'
	user = 'usuario'
	password = 'usuario'
	schemas = ['apprest']
}